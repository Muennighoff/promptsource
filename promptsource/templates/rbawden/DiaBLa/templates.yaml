dataset: rbawden/DiaBLa
templates:
  0e55b858-92b0-4e5b-923b-0d23518035e3: !Template
    answer_choices: null
    id: 0e55b858-92b0-4e5b-923b-0d23518035e3
    jinja: '{% set previous_ref = "" %}

      {% if utterance_meta.lang == "french" %}

      {% if dialogue_history|length > 0 %}


      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates into English as: {{ previous_ref }}


      "{{ orig }}" translates into English as: ||| {{ ref }}


      {% endif %}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_lang-given_fr2en
    reference: 1 previous context (same language) used for analogy, French-to-English
  0e841022-eb3c-4f5a-b57a-0cbd3d628b68: !Template
    answer_choices: null
    id: 0e841022-eb3c-4f5a-b57a-0cbd3d628b68
    jinja: "{% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"english\" %}\n\
      {% if dialogue_history|length > 0 %}\nGiven the following dialogue between person\
      \ A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ previous.orig }}\n{% endfor %}\
      \ \nTranslate the next utterance in the dialogue into {% if utterance_meta.lang\
      \ == \"english\" %}French{% else %}English{% endif %}:\n{% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ orig }}\n\n||| {% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ ref }}\n{% endif %}\n{% endif\
      \ %}"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_orig-lang_en2fr
    reference: Up to 5 previous sentences (original language), English-to-French
  123f36ee-c808-4cf0-aa5c-ed1f03ac3b69: !Template
    answer_choices: yes || no
    id: 123f36ee-c808-4cf0-aa5c-ed1f03ac3b69
    jinja: "{% set options = [\"word choice\", \"grammar\", \"style\", \"coherence\"\
      , \"meaning\"] %}\n{% set label = range(0,5)|random %}\n{% set reply=0 %}\n\
      {% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"english\" %}\n{% if\
      \ options[label] in utterance_meta.eval_problems %}{% set reply=0 %}{% else\
      \ %}{% set reply=1 %}{% endif %}\n{% if utterance_meta.eval_problems|length\
      \ > 0 %}\n{% if dialogue_history|length > 0 %}\nGiven the following dialogue\
      \ between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ != utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}{% endfor %} \n{% if utterance_meta.lang == first_lang %}A{% else\
      \ %}B{% endif %}: {{ mt }}\n\nDoes the last utterance contain a {{ options[label]\
      \ }} problem, {{ \"yes\" }} or {{ \"no\" }}?\n\n||| {{ [\"yes\", \"no\" ][reply]\
      \ }}\n{% endif %}\n{% endif %}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: true
      metrics:
      - Accuracy
      original_task: false
    name: classify-errors_same-lang_fr
    reference: Identify presence of notable errors, same language context (5), French
      translation
  1798dee9-8a9c-45ed-87d8-237ec7dbf5ca: !Template
    answer_choices: null
    id: 1798dee9-8a9c-45ed-87d8-237ec7dbf5ca
    jinja: "{% if utterance_meta.lang == \"english\" %}\n{% if dialogue_history|length\
      \ > 0 %}\nGiven the following dialogue between person A and person B:\n\n{%\
      \ set first_lang=dialogue_history[-5:][0].utterance_meta.lang %}{% for previous\
      \ in dialogue_history[-5:] %}{% if previous.utterance_meta.lang == first_lang\
      \ %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang == utterance_meta.lang\
      \ %}{{ previous.orig }}{% else %}{{ previous.ref }}{% endif %}\n{% endfor %}\
      \ \nTranslate the next utterance in the dialogue into {% if utterance_meta.lang\
      \ == \"english\" %}French{% else %}English{% endif %}:\n{% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ orig }}\n\n||| {% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ ref }}\n{% endif %}\n{% endif\
      \ %}\n"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-ref_en2fr
    reference: Up to 5 previous sentences (same language, ref), English-to-French
  2731216a-b994-48f9-aaf6-00c7038bbed5: !Template
    answer_choices: null
    id: 2731216a-b994-48f9-aaf6-00c7038bbed5
    jinja: "{% set first_lang=\"\" %}\n{% if dialogue_history|length > 0 %}\nGiven\
      \ the following dialogue between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ == utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.ref }}{%\
      \ endif %}\n{% endfor %} \nTranslate the next utterance in the dialogue into\
      \ {% if utterance_meta.lang == \"english\" %}French{% else %}English{% endif\
      \ %}:\n{% if utterance_meta.lang == first_lang %}A{% else %}B{% endif %}: {{\
      \ orig }}\n\n||| {% if utterance_meta.lang == first_lang %}A{% else %}B{% endif\
      \ %}: {{ ref }}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-ref_both-directions
    reference: Up to 5 previous sentences (same language, ref), both language directions
  28ea04f4-338e-40cf-8730-4a794b5b64b2: !Template
    answer_choices: yes || no
    id: 28ea04f4-338e-40cf-8730-4a794b5b64b2
    jinja: "{% set options = [\"word choice\", \"grammar\", \"style\", \"coherence\"\
      , \"meaning\"] %}\n{% set label = range(0,5)|random %}\n{% set reply=0 %}\n\
      {% set first_lang=\"\" %}\n{% if options[label] in utterance_meta.eval_problems\
      \ %}{% set reply=0 %}{% else %}{% set reply=1 %}{% endif %}\n{% if utterance_meta.eval_problems|length\
      \ > 0 %}\n{% if dialogue_history|length > 0 %}\nGiven the following dialogue\
      \ between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ != utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}{% endfor %} \n{% if utterance_meta.lang == first_lang %}A{% else\
      \ %}B{% endif %}: {{ mt }}\n\nDoes the last utterance contain a {{ options[label]\
      \ }} problem, {{ \"yes\" }} or {{ \"no\" }}?\n\n||| {{ [\"yes\", \"no\" ][reply]\
      \ }}\n{% endif %}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: true
      metrics:
      - Accuracy
      original_task: false
    name: classify-errors_same-lang_both-directions
    reference: Identify presence of notable errors
  2abc728f-e7fc-44fc-ba2a-ad78ae2469a9: !Template
    answer_choices: null
    id: 2abc728f-e7fc-44fc-ba2a-ad78ae2469a9
    jinja: '{% set previous_ref = "" %}{% if utterance_meta.lang == "english" %}

      {% if dialogue_history|length > 0 %}

      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates as: {{ previous_ref }}


      "{{ orig }}" translates as: ||| {{ ref }}


      {% endif %}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_infer-lang_en2fr
    reference: 1 previous context (same language) used for analogy, English-to-French
  40c1ee21-3cf4-4efc-b902-d3aab0a79c40: !Template
    answer_choices: null
    id: 40c1ee21-3cf4-4efc-b902-d3aab0a79c40
    jinja: '{% set previous_ref = "" %}{% if utterance_meta.lang == "french" %}

      {% if dialogue_history|length > 0 %}

      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates as: {{ previous_ref }}


      "{{ orig }}" translates as: ||| {{ ref }}


      {% endif %}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_infer-lang_fr2en
    reference: 1 previous context (same language) used for analogy, French-to-English
  6a01fbe6-d5ec-4ad9-a2ee-3c48ed095885: !Template
    answer_choices: null
    id: 6a01fbe6-d5ec-4ad9-a2ee-3c48ed095885
    jinja: '{% set previous_ref = "" %}{% set other_lang = "" %}

      {% if dialogue_history|length > 0 %}{% if utterance_meta.lang == "french" %}{%
      set other_lang = "English" %}{% else %}{% set other_lang = "French" %}{% endif
      %}

      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates into {{ other_lang }} as: {{ previous_ref }}


      "{{ orig }}" translates into {{ other_lang }} as: ||| {{ ref }}


      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_lang-given_both-directions
    reference: 1 previous context (same language) used for analogy, both directions
  702f1f50-d6b0-4e65-a8e6-b449257f1e35: !Template
    answer_choices: null
    id: 702f1f50-d6b0-4e65-a8e6-b449257f1e35
    jinja: "{% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"french\" %}\n\
      {% if dialogue_history|length > 0 %}\nGiven the following dialogue between person\
      \ A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ == utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}\n{% endfor %} \nTranslate the next utterance in the dialogue into\
      \ {% if utterance_meta.lang == \"english\" %}French{% else %}English{% endif\
      \ %}:\n{% if utterance_meta.lang == first_lang %}A{% else %}B{% endif %}: {{\
      \ orig }}\n\n||| {% if utterance_meta.lang == first_lang %}A{% else %}B{% endif\
      \ %}: {{ ref }}\n{% endif %}\n{% endif %}\n"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-ref_fr2en
    reference: Up to 5 previous sentences (same language, ref), French-to-English
  72759632-7764-4493-9a6e-8f1c8b337bde: !Template
    answer_choices: null
    id: 72759632-7764-4493-9a6e-8f1c8b337bde
    jinja: "{% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"french\" %}\n\
      {% if dialogue_history|length > 0 %}\nGiven the following dialogue between person\
      \ A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ == utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}\n{% endfor %} \nTranslate the next utterance in the dialogue into\
      \ {% if utterance_meta.lang == \"english\" %}French{% else %}English{% endif\
      \ %}:\n{% if utterance_meta.lang == first_lang %}A{% else %}B{% endif %}: {{\
      \ orig }}\n\n||| {% if utterance_meta.lang == first_lang %}A{% else %}B{% endif\
      \ %}: {{ ref }}\n{% endif %}\n{% endif %}\n"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-mt_fr2en
    reference: Up to 5 previous sentences (same language, MT), French-to-English
  72c1cbbd-956f-4721-9cee-fd50148cf77d: !Template
    answer_choices: null
    id: 72c1cbbd-956f-4721-9cee-fd50148cf77d
    jinja: '{% if utterance_meta.lang == "french"  %}

      Translate the following into English: "{{ orig }}" ||| {{ ref }}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_sent_fr2en
    reference: Sentence-level, French-to-English
  836c5096-2fd6-478c-89e8-39a050347d28: !Template
    answer_choices: null
    id: 836c5096-2fd6-478c-89e8-39a050347d28
    jinja: "{% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"french\" %}\n\
      {% if dialogue_history|length > 0 %}\nGiven the following dialogue between person\
      \ A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ previous.orig }}\n{% endfor %}\
      \ \nTranslate the next utterance in the dialogue into {% if utterance_meta.lang\
      \ == \"english\" %}French{% else %}English{% endif %}:\n{% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ orig }}\n\n||| {% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ ref }}\n{% endif %}\n{% endif\
      \ %}"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: false
    name: MT_5-context_orig-lang_fr2en
    reference: Up to 5 previous sentences (original language), French-to-English
  842dc41a-8af0-4dca-8b55-a87026bfac31: !Template
    answer_choices: null
    id: 842dc41a-8af0-4dca-8b55-a87026bfac31
    jinja: 'Translate the following into {% if utterance_meta.lang == "english"  %}French{%
      else %}English{% endif %}: "{{ orig }}"? ||| {{ ref }}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_sent_both-directions
    reference: Sentence-level, both directions
  93f5256d-bd93-4056-b466-152b55860d02: !Template
    answer_choices: null
    id: 93f5256d-bd93-4056-b466-152b55860d02
    jinja: "{% set first_lang=\"\" %}\n{% if dialogue_history|length > 0 %}\nGiven\
      \ the following dialogue between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ previous.orig }}\n{% endfor %}\
      \ \nTranslate the next utterance in the dialogue into {% if utterance_meta.lang\
      \ == \"english\" %}French{% else %}English{% endif %}:\n{% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ orig }}\n\n||| {% if utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {{ ref }}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_orig-lang_both-directions
    reference: Up to 5 previous sentences (original language), both language directions
  96da9c0e-e606-4283-8494-7129c75b4d02: !Template
    answer_choices: null
    id: 96da9c0e-e606-4283-8494-7129c75b4d02
    jinja: '{% if utterance_meta.lang == "english"  %}

      Translate the following into French: "{{ orig }}" ||| {{ ref }}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_sent_en2fr
    reference: Sentence-level, English-to-French
  97d56019-a7df-4733-aed0-332c222e9079: !Template
    answer_choices: null
    id: 97d56019-a7df-4733-aed0-332c222e9079
    jinja: '{% set previous_ref = "" %}

      {% if utterance_meta.lang == "english" %}

      {% if dialogue_history|length > 0 %}


      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates into French as: {{ previous_ref }}


      "{{ orig }}" translates into French as: ||| {{ ref }}


      {% endif %}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_lang-given_en2fr
    reference: 1 previous context (same language) used for analogy, English-to-French
  ac4c63da-32d2-40ac-aa7a-632e8ba42b4a: !Template
    answer_choices: A ||| B
    id: ac4c63da-32d2-40ac-aa7a-632e8ba42b4a
    jinja: '{% set label = range(0,2)|random %}

      {% if ref != mt %}

      Which of the following translations of "{{ orig }}" is produced automatically?

      {{ "A" }}) {% if label == 0 %}{{ ref }}{% else %}{{ mt }}{% endif %}

      {{ "B" }}) {% if label == 0 %}{{ mt }}{% else %}{{ ref }}{% endif %}

      ||| {{ ["A", "B"][label] }}

      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: true
      metrics:
      - Accuracy
      original_task: false
    name: discriminate-mt-ref
    reference: Identify-MT-output
  b61c81ec-29eb-47f8-a1c6-561264ac04f3: !Template
    answer_choices: null
    id: b61c81ec-29eb-47f8-a1c6-561264ac04f3
    jinja: "{% set first_lang=\"\" %}\n{% if dialogue_history|length > 0 %}\nGiven\
      \ the following dialogue between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ == utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}\n{% endfor %} \nTranslate the next utterance in the dialogue into\
      \ {% if utterance_meta.lang == \"english\" %}French{% else %}English{% endif\
      \ %}:\n{% if utterance_meta.lang == first_lang %}A{% else %}B{% endif %}: {{\
      \ orig }}\n\n||| {% if utterance_meta.lang == first_lang %}A{% else %}B{% endif\
      \ %}: {{ ref }}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-mt_both-directions
    reference: Up to 5 previous sentences (same language, MT), both language directions
  d068ba77-ce75-4de3-a170-ca0a7cd3f8d1: !Template
    answer_choices: null
    id: d068ba77-ce75-4de3-a170-ca0a7cd3f8d1
    jinja: "{% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"english\" %}\n\
      {% if dialogue_history|length > 0 %}\nGiven the following dialogue between person\
      \ A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ == utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.ref }}{%\
      \ endif %}\n{% endfor %} \nTranslate the next utterance in the dialogue into\
      \ {% if utterance_meta.lang == \"english\" %}French{% else %}English{% endif\
      \ %}:\n{% if utterance_meta.lang == first_lang %}A{% else %}B{% endif %}: {{\
      \ orig }}\n\n||| {% if utterance_meta.lang == first_lang %}A{% else %}B{% endif\
      \ %}: {{ ref }}\n{% endif %}\n{% endif %}\n"
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_5-context_same-lang-mt_en2fr
    reference: Up to 5 previous sentences (same language, MT), English-to-French
  dddd6f35-5a01-431b-b59b-e9a8e76377aa: !Template
    answer_choices: yes || no
    id: dddd6f35-5a01-431b-b59b-e9a8e76377aa
    jinja: "{% set options = [\"word choice\", \"grammar\", \"style\", \"coherence\"\
      , \"meaning\"] %}\n{% set label = range(0,5)|random %}\n{% set reply=0 %}\n\
      {% set first_lang=\"\" %}\n{% if utterance_meta.lang == \"french\" %}\n{% if\
      \ options[label] in utterance_meta.eval_problems %}{% set reply=0 %}{% else\
      \ %}{% set reply=1 %}{% endif %}\n{% if utterance_meta.eval_problems|length\
      \ > 0 %}\n{% if dialogue_history|length > 0 %}\nGiven the following dialogue\
      \ between person A and person B:\n\n{% set first_lang=dialogue_history[-5:][0].utterance_meta.lang\
      \ %}{% for previous in dialogue_history[-5:] %}{% if previous.utterance_meta.lang\
      \ == first_lang %}A{% else %}B{% endif %}: {% if previous.utterance_meta.lang\
      \ != utterance_meta.lang %}{{ previous.orig }}{% else %}{{ previous.mt }}{%\
      \ endif %}{% endfor %} \n{% if utterance_meta.lang == first_lang %}A{% else\
      \ %}B{% endif %}: {{ mt }}\n\nDoes the last utterance contain a {{ options[label]\
      \ }} problem, {{ \"yes\" }} or {{ \"no\" }}?\n\n||| {{ [\"yes\", \"no\" ][reply]\
      \ }}\n{% endif %}\n{% endif %}\n{% endif %}"
    metadata: !TemplateMetadata
      choices_in_prompt: true
      metrics:
      - Accuracy
      original_task: false
    name: classify-errors_same-lang_en
    reference: Identify presence of notable errors, same language context (5), English
      translation
  eea8f47e-9bf5-4423-980b-58a9635c1f49: !Template
    answer_choices: 1 previous context (same language) used for analogy, both directions
    id: eea8f47e-9bf5-4423-980b-58a9635c1f49
    jinja: '{% set previous_ref = "" %}{% set other_lang = "" %}

      {% if dialogue_history|length > 0 %}

      {% if utterance_meta.lang == "french" %}{% set other_lang = "English" %}{% else
      %}{% set other_lang = "French" %}{% endif %}

      "{% if utterance_meta.lang == dialogue_history[-1].utterance_meta.lang %}{{
      dialogue_history[-1].orig }}{% set previous_ref = dialogue_history[-1].ref %}{%
      else %}{{ dialogue_history[-1].ref }}{% set previous_ref = dialogue_history[-1].orig
      %}{% endif %}" translates as: {{ previous_ref }}


      "{{ orig }}" translates as: ||| {{ ref }}


      {% endif %}'
    metadata: !TemplateMetadata
      choices_in_prompt: false
      metrics:
      - BLEU
      original_task: true
    name: MT_1-context-analogy_infer-lang_both-directions
    reference: MT task, 1 previous context (orig language)
